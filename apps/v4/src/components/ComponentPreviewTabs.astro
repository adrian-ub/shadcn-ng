---
import { cn } from '@/lib/utils'
import { ComponentPreviewWrapper } from './_component-preview-wrapper'
import ComponentSource from './ComponentSource.astro'
import { Tabs, TabsList, TabsTrigger, TabsContent } from './ui/tabs'
import type { HTMLAttributes } from 'astro/types'

export interface Props extends HTMLAttributes<'div'> {
  name: string
  align?: 'center' | 'start' | 'end'
}

const { name, align = 'center', class: className } = Astro.props
---

<div class={cn('group relative mt-4 mb-12 flex flex-col gap-2', className)}>
  <Tabs class="relative mr-auto w-full">
    <div class="flex items-center justify-between">
      <TabsList class="justify-start gap-4 rounded-none bg-transparent px-2 md:px-0">
        <TabsTrigger
          value="preview"
          class="text-muted-foreground data-[state=active]:text-foreground px-0 text-base data-[state=active]:shadow-none dark:data-[state=active]:border-transparent dark:data-[state=active]:bg-transparent"
        >
          Preview
        </TabsTrigger>
        <TabsTrigger
          value="code"
          class="text-muted-foreground data-[state=active]:text-foreground px-0 text-base data-[state=active]:shadow-none dark:data-[state=active]:border-transparent dark:data-[state=active]:bg-transparent"
        >
          Code
        </TabsTrigger>
      </TabsList>
    </div>
    <TabsContent value="preview">
      <div class="relative rounded-lg border md:-mx-1">
        <ComponentPreviewWrapper {...{ name, align, class: Astro.props.class }} client:visible />
      </div>
    </TabsContent>
    <TabsContent value="code" class="border-code **:[figure]:!m-0 **:[pre]:h-[450px]">
      <ComponentSource {...{ name, collapsible: false }} />
    </TabsContent>
  </Tabs>
</div>
